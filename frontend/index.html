<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agentic RAG | Premium AI</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Custom Style -->
    <link rel="stylesheet" href="static/style.css">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#6366f1',
                        secondary: '#4f46e5',
                        dark: '#0f172a',
                        card: '#1e293b'
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'float': 'float 6s ease-in-out infinite'
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        }
                    }
                }
            }
        }
    </script>
</head>

<body class="bg-gray-900 text-white h-screen flex flex-col font-sans overflow-hidden">

    <!-- Background Decoration -->
    <div class="fixed inset-0 z-0 pointer-events-none overflow-hidden">
        <div
            class="absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-primary/20 rounded-full blur-[100px] animate-pulse-slow">
        </div>
        <div class="absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-secondary/20 rounded-full blur-[100px] animate-pulse-slow"
            style="animation-delay: 1.5s;"></div>
    </div>

    <!-- Main Container -->
    <main class="relative z-10 flex flex-1 w-full max-w-7xl mx-auto p-4 md:p-6 gap-6 h-screen">

        <!-- Sidebar: Upload & History (Collapsible on mobile?) -->
        <aside
            class="w-1/4 hidden md:flex flex-col bg-card/50 backdrop-blur-xl border border-white/10 rounded-2xl p-4 shadow-xl transition-all">
            <div class="flex items-center gap-3 mb-6 p-2">
                <div
                    class="w-10 h-10 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center shadow-lg">
                    <i data-lucide="bot" class="text-white w-6 h-6"></i>
                </div>
                <h1 class="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-400">
                    Agentic RAG</h1>
            </div>

            <!-- Upload Area -->
            <div id="drop-zone"
                class="border-2 border-dashed border-white/20 rounded-xl p-6 flex flex-col items-center justify-center text-center cursor-pointer hover:border-primary/50 hover:bg-white/5 transition-all group mb-6 relative overflow-hidden">
                <input type="file" id="file-input" class="hidden" multiple accept=".pdf,.csv,.docx,.txt,.pptx">
                <div class="absolute inset-0 bg-primary/10 opacity-0 group-hover:opacity-100 transition-opacity"></div>
                <i data-lucide="upload-cloud"
                    class="w-10 h-10 text-gray-400 group-hover:text-primary mb-3 transition-colors animate-float"></i>
                <p class="text-sm font-medium text-gray-300">New Document</p>
                <p class="text-xs text-gray-500 mt-1">PDF, DOCX, CSV, PPTX</p>
            </div>

            <!-- Files List -->
            <div class="flex-1 overflow-y-auto pr-1">
                <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3">Resources</h3>
                <div id="file-list" class="space-y-2">
                    <!-- File Items will go here -->
                </div>
            </div>

            <!-- Connection Status -->
            <div class="mt-4 pt-4 border-t border-white/10 flex items-center justify-between text-xs text-gray-400">
                <span>System Status</span>
                <span class="flex items-center gap-1.5">
                    <span class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></span>
                    Online
                </span>
            </div>
        </aside>

        <!-- Chat Area -->
        <section
            class="flex-1 flex flex-col min-h-0 bg-card/30 backdrop-blur-md border border-white/10 rounded-2xl shadow-2xl relative overflow-hidden">
            <!-- Messages -->
            <div id="chat-messages" class="flex-1 overflow-y-auto p-4 space-y-4 scroll-smooth">
                <!-- Welcome Message -->
                <div
                    class="flex flex-col items-center justify-center h-full text-center text-gray-400 space-y-4 opacity-70">
                    <div class="w-16 h-16 bg-white/5 rounded-2xl flex items-center justify-center mb-2">
                        <i data-lucide="message-square" class="w-8 h-8 opacity-50"></i>
                    </div>
                    <p class="text-lg font-medium">Ready to assist.</p>
                    <p class="text-sm max-w-md">Upload documents to the left or ask general questions. I can analyze
                        PDFs, Spreadsheets, and Slides.</p>
                </div>
            </div>

            <!-- Input Area -->
            <div class="p-4 bg-gray-900/50 backdrop-blur-lg border-t border-white/10">
                <form id="chat-form" class="relative flex items-center gap-2 max-w-4xl mx-auto">
                    <input type="text" id="user-input"
                        class="w-full bg-white/5 border border-white/10 rounded-xl px-5 py-4 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-transparent placeholder-gray-500 text-white transition-all shadow-inner"
                        placeholder="Ask a question about your documents..." autocomplete="off">
                    <button type="submit"
                        class="absolute right-2 p-2.5 bg-gradient-to-r from-primary to-secondary rounded-lg hover:shadow-lg hover:scale-105 active:scale-95 transition-all disabled:opacity-50 disabled:cursor-not-allowed text-white">
                        <i data-lucide="send" class="w-5 h-5"></i>
                    </button>
                </form>
            </div>
        </section>

    </main>

    <!-- MCP Trace Overlay (Optional/Toggle) -->
    <div id="mcp-trace"
        class="fixed top-6 right-6 z-50 w-80 bg-black/80 backdrop-blur-xl border border-white/10 rounded-xl p-4 shadow-2xl transform translate-x-full transition-transform duration-300">
        <div class="flex items-center justify-between mb-3 pb-2 border-b border-white/10">
            <h3 class="text-xs font-bold text-primary uppercase tracking-wider flex items-center gap-2">
                <i data-lucide="network" class="w-3 h-3"></i> MCP Trace
            </h3>
            <button id="close-trace" class="text-gray-400 hover:text-white"><i data-lucide="x"
                    class="w-3 h-3"></i></button>
        </div>
        <div id="trace-logs" class="h-60 overflow-y-auto text-[10px] space-y-2 font-mono text-gray-300 scrollbar-thin">
            <!-- Traces -->
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast-container" class="fixed bottom-6 right-6 z-50 flex flex-col gap-2 pointer-events-none"></div>

    <script src="static/app.js"></script>
</body>

</html>